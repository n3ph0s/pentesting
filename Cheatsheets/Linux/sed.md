# SED - Stream Editor



The sed command is a stream editor and it can perform lots of function on files like, searching, find and replace, insertion or deletion.  It also supports regular expressions which allows it to perform complex pattern matching.


- [Replacing or substituting string](#Replacing-or-substituting-string)
- [Replacing the nth occurrence of a pattern in a line](#Replacing-the-nth-occurrence-of-a-pattern-in-a-line)
- [Replacing all the occurrence of the pattern in a line](#Replacing-all-the-occurrence-of-the-pattern-in-a-line)
- [Replacing from nth occurrence to all occurrences in a line](#Replacing-from-nth-occurrence-to-all-occurrences-in-a-line)
- [Replacing string on a specific line number](#Replacing-string-on-a-specific-line-number)
- [Replacing string on a range of lines](#Replacing-string-on-a-range-of-lines)
- [Deleting lines from a particular file](#Deleting-lines-from-a-particular-file)

In the below examples this outputs the changes of the sed command but doesn’t change the file that is referenced.

To change the file as part of the command you will need to use the -i option and it is strongly recommended that you include `-i.bak` option which will automatically change the file and make a backup copy with the extension `.bak`

## Replacing or substituting string

sed command is mostly used to replace the text in a file. The below simple sed command replaces the first word of unix on each line with the word linux

```
sed 's/unix/linux/' test.txt
```

In the above example, it replaces the first occurrence of the word on each line and will ignore subsequent instances of that word on the line

## Replacing the nth occurrence of a pattern in a line

Use the /1, /2 etc flags to replace the first, second occurrence of a pattern in a line. The below command replaces the second occurrence of the word “unix” with “linux” in a line

```
sed 's/unix/linux/2' test.txt
```

## Replacing all the occurrence of the pattern in a line

The substitute flag /g (global replacement) specifies the sed command to replace all the occurrences of the string in the line.

```
sed 's/unix/linux/' test.txt
```

## Replacing from nth occurrence to all occurrences in a line

Use the combination of /1, /2 etc and /g to replace all the patterns from the nth occurrence of a pattern in a line. The following sed command replaces the third, fourth, fifth… “unix” word with “linux” word in a line.

```
sed 's/unix/linux/3g' test.txt
```

## Replacing string on a specific line number

You can restrict the sed command to replace the string on a specific line number. In this example, sed replaces the string only on the third line.

```
sed '3 s/unix/linux/' test.txt
```

## Replacing string on a range of lines

You can specify a range of line numbers to the sed command for replacing a string. In this example, sed replaces string with a range from 1 to 3.

```
sed '1,3 s/unix/linux/' test.txt
```
Here $ indicates the last line in the file. So the sed command replaces the text from the second line to the last line in the file.

```
sed '2,$ s/unix/linux/' test.txt
```

## Deleting lines from a particular file

To delete a single line in a file e.g. 5th line in a file

```
sed '5d' test.txt
```

To delete the last line

```
sed '$d' test.txt
```

To delete a range

```
sed '3,6d' test.txt
```

To delete from nth to the last line

```
sed '3,$d' test.txt
```

To delete pattern matching line

```
sed '/linux/d' test.txt
```

To delete blank lines

```
sed '/^$/d' test.txt
```

To delete empty lines or those that start with the # symbol

```
sed '/^$/d;/#/d' test.txt
```
There is a lot more that can be done with sed and this is the basics that will suffice for manipulation of data
